<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome to Bank xx!</title>
    <script src="jquery-1.11.3.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="prototype.js"></script>
    <script src="bank.js"></script>
    <script>
        var bankAdmin = new BankApp.BankAdmin();

        window.onload=function(){
            document.getElementById("formpanel").style.display="none";
            document.getElementById("editPanel").style.display="none";

            var userprofiles = bankAdmin.getCustomers();
            loadgrid(userprofiles);


        }

        //delete button
        function deleteItem(customerId){
            bankAdmin.deleteItem(customerId);
            clearForm();
            closeForm();
            loadgrid(bankAdmin.getCustomers());
        }


        //edit button
        function editItem(customerId){
            showEditPanel();

            document.getElementById("text_firstName").style.value="";


        }

        function showForm(){
            document.getElementById("gridpanel").style.display="none";
            document.getElementById("formpanel").style.display="block";
            document.getElementById("editPanel").style.display="none";
        }

        function showEditPanel(){
            document.getElementById("gridpanel").style.display="none";
            document.getElementById("formpanel").style.display="none";
            document.getElementById("editPanel").style.display="block";
        }

        function closeForm(){
            document.getElementById("gridpanel").style.display="block";
            document.getElementById("formpanel").style.display="none";
            document.getElementById("editPanel").style.display="none";
        }

        function clearForm(){
            document.getElementById("txtusername").value="";
            document.getElementById("txtpassword").value="";

        }

        function loadgrid(userprofiles){
            if(userprofiles.length>0) {
                var table = "<table><tr><th>Id</th><th>Username</th><th>Password</th><th>Action</th></tr>";
                userprofiles.forEach(function(entry){
                    table+="<tr><td>" +entry.CustomerId+"</td><td>"+entry.Username+"</td><td>"+entry.Password+"</td><td><a href='javascript:void(0)' onclick='editItem(" + entry.CustomerId + ")'>Edit</a>|<a href='javascript:void(0)'>View</a>|<a href='javascript:void(0)'onclick='deleteItem(" + entry.CustomerId + ")'>Delete</a></td></tr>";
                });
                table+="</table>";
                document.getElementById("grid").innerHTML = table;

            }else{
                document.getElementById("grid").innerHTML="No Data";
            }
        }

        function createNew(){
            var username= document.getElementById("txtusername").value;
            var password=document.getElementById("txtpassword").value;

            var userProfiles = new BankApp.UserProfiles(username,password);

            console.log(userProfiles);

            bankAdmin.addNew(userProfiles);
            clearForm();
            closeForm();
            loadgrid(bankAdmin.getCustomers());





        }


    </script>

</head>
<body>
<div id="gridpanel">
    <div>
        <p>Create A Customer </p>
        <button type="button" onclick="showForm()">Add New</button>
    </div>
    <div id="grid">

    </div>



</div>

<div id = "formpanel">
    <form>
        <div>
            <input type="hidden" id="CustomerId"/>
        </div>
        <div>
            <label>username</label>
            <input type="text" id="txtusername"/>
        </div>
        <div>
            <label>password</label>
            <input type="password" id="txtpassword"/>
        </div>
        <div id="isSaving">
            <button type="button" onclick="createNew()">Create</button>
            <button type="button" onclick="closeForm()">Cancel</button>
        </div>

    </form>

</div>

<div id = "editPanel">
    <form>
        <div>
            <label>First Name: </label>
            <input type="text" id="text_firstName">
        </div>

        <div>
            <label>Last Name: </label>
            <input type="text" id="text_lastName">
        </div>

        <div>
            <label>Email: </label>
            <input type="text" id="text_email">
        </div>

        <div>
            <label>Gender: </label>
            <input type="text" id="text_gender">
        </div>


        <div>
            <label>Mobile: </label>
            <input type="text" id="text_mobile">
        </div>

        <div id="updateInfo">
            <button type="button" onclick="updateInfo()">Update Info</button>
            <button type="button" onclick="closeForm()">Cancel</button>
        </div>

    </form>
</div>







</body>
</html>