<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome!</title>

    <script src="jquery-1.11.3.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="prototype.js"></script>
    <script src="bank.js"></script>

    <script>

        var bankAdmin = new BankApp.BankAdmin();

        var profile_id = JSON.parse(sessionStorage["temp_id"]);
        console.log(profile_id);

//        var profiles = JSON.parse(localStorage["userProfiles"]);
//        var userinfos = JSON.parse(localStorage["userInfos"]);
//        var accounts = JSON.parse(localStorage["accounts"]);
        var profiles = bankAdmin.getCustomers();
        var userinfos = bankAdmin.getCustomerInfos();
        var accounts = bankAdmin.getAccounts();


        window.onload=function(){

            showInfo();
            showAccounts();


        }

//        var profile;
//        for(var i = 0; i<profiles.length; i++){
//            if(profiles[i].CustomerId==profile_id){
//                profile = profiles[i];
//                break;
//            }
//        }
//
//        var account;
//        for(var i=0; i<accounts.length; i++){
//            if(accounts[i].AccountId==profile_id){
//                account=userinfos[i];
//            }
//        }

        function showInfo() {

            var userinfo;
            for(var i= 0; i<userinfos.length; i++){
                if(userinfos[i].UserInfoId==profile_id){
                    userinfo=userinfos[i];
                    break;
                }
            }
            document.getElementById("lastname").value = userinfo.LastName;
            document.getElementById("firstname").value = userinfo.FirstName;
            document.getElementById("gender").value = userinfo.Gender;
            document.getElementById("email").value = userinfo.Email;
            document.getElementById("mobile").value = userinfo.Mobile;
        }

        function showAccounts(){
            var saving;
            var checking;
//            var account;

            for(var i= 0;i<=accounts.length; i++) {


//                var shanshan= accounts[1].Account.AccountNum;
//                var shanshan = accounts[1].AccountId;
//                console.log(shanshan);
                if(accounts[i].AccountId==profile_id){
//                    console.log(accounts[i].AccountId);

                    if(accounts[i].AccountType == "Saving"){
                    saving=accounts[i];
                        console.log("sssssss");
                    }else{
                        checking=accounts[i];
                     }
                    break;

                    }else{
                    alert("Invalid Credentials");
                }

            }

        }


    </script>
</head>
<body>
<div>
    <h3>My Basic Info</h3>
    <div id="basicInfo">
        <label>Last Name:</label>
        <input type="text" id="lastname"/><br>

        <label>First Name:</label>
        <input type="text" id="firstname"/><br>

        <label>Gender:</label>
        <input type="text" id="gender"/><br>

        <label>Email:</label>
        <input type="text" id="email"/><br>

        <label>Mobile:</label>
        <input type="text" id="mobile"/><br>


    </div>

    <h3>My Accounts</h3>
    <div id="myaccounts">
        <label>Saving Account:</label>
        <input type="text" id="saving"/><br>

        <label>Checking Account:</label>
        <input type="text" id="checking"/><br>

    </div>

</div>

</body>
</html>